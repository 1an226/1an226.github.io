<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Paul's Blog CMS</title>
  
  <!-- Try multiple CDNs -->
  <script src="https://cdn.jsdelivr.net/npm/decap-cms@^3.0.0/dist/decap-cms.js"></script>
</head>
<body>
  <div id="status">Loading CMS... If this message stays, the CMS script is blocked.</div>
  
  <script>
    setTimeout(function() {
      if (typeof DecapCMS === 'undefined') {
        document.getElementById('status').innerHTML = 
          'CMS script blocked. Trying self-hosted version...';
        
        // Load from your own assets
        var script = document.createElement('script');
        script.src = '/assets/js/decap-cms.js';
        document.head.appendChild(script);
      } else {
        // Initialize if script loaded
        DecapCMS.init({
          config: {
            backend: {
              name: "github",
              repo: "1an226/1an226.github.io",
              branch: "main",
              auth_type: "implicit",
              site_domain: "1an226.github.io"
            },
            media_folder: "assets/images/uploads",
            public_folder: "/assets/images/uploads",
            collections: [
              {
                name: "posts",
                label: "Blog Posts",
                folder: "_posts",
                create: true,
                slug: "{{year}}-{{month}}-{{day}}-{{slug}}",
                fields: [
                  {label: "Title", name: "title", widget: "string"},
                  {label: "Genre", name: "genre", widget: "select", 
                   options: ["cyberpunk", "horror", "modern-warfare", "philosophy", "politics", "talk-of-town"]},
                  {label: "Publish Date", name: "date", widget: "datetime"},
                  {label: "Featured Image", name: "image", widget: "image", required: false},
                  {label: "Content", name: "body", widget: "markdown"}
                ]
              }
            ]
          }
        });
        document.getElementById('status').style.display = 'none';
      }
    }, 2000);
  </script>
</body>
</html>
